"use strict";
var __read = (this && this.__read) || function (o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
    }
    catch (error) { e = { error: error }; }
    finally {
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        }
        finally { if (e) throw e.error; }
    }
    return ar;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.getStaticServerAppConfig = void 0;
var app_config_utils_1 = require("../utils/app-config-utils");
var appConfig;
/**
 * Compose Extractor app config from process args and environment variables.
 */
function getStaticServerAppConfig() {
    if (appConfig) {
        return appConfig;
    }
    /**** options from process arguments ****/
    var _a = __read(process.argv, 6), epsInstanceId = _a[2], connectorAppDir = _a[3], staticServerPort = _a[4], staticServerId = _a[5];
    /**** options from environment variables ****/
    var logOption = (0, app_config_utils_1.getRequiredEnvVariable)('EPS_APP_LOG_CONFIG');
    appConfig = {
        epsInstanceId: epsInstanceId,
        connectorAppDir: connectorAppDir,
        staticServerPort: parseInt(staticServerPort),
        staticServerId: staticServerId,
        logOption: (0, app_config_utils_1.parseAppLogOption)(logOption),
    };
    return appConfig;
}
exports.getStaticServerAppConfig = getStaticServerAppConfig;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RhdGljLXNlcnZlci1hcHAtY29uZmlnLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2Vwcy9zdGF0aWMtc2VydmVyL3N0YXRpYy1zZXJ2ZXItYXBwLWNvbmZpZy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0EsOERBQXFGO0FBVXJGLElBQUksU0FBNEMsQ0FBQTtBQUVoRDs7R0FFRztBQUNILFNBQWdCLHdCQUF3QjtJQUN0QyxJQUFJLFNBQVMsRUFBRTtRQUNiLE9BQU8sU0FBUyxDQUFBO0tBQ2pCO0lBRUQsMENBQTBDO0lBQ3BDLElBQUEsS0FBQSxPQUF5RSxPQUFPLENBQUMsSUFBSSxJQUFBLEVBQWhGLGFBQWEsUUFBQSxFQUFFLGVBQWUsUUFBQSxFQUFFLGdCQUFnQixRQUFBLEVBQUUsY0FBYyxRQUFnQixDQUFBO0lBRTNGLDhDQUE4QztJQUM5QyxJQUFNLFNBQVMsR0FBRyxJQUFBLHlDQUFzQixFQUFDLG9CQUFvQixDQUFDLENBQUE7SUFFOUQsU0FBUyxHQUFHO1FBQ1YsYUFBYSxlQUFBO1FBQ2IsZUFBZSxpQkFBQTtRQUNmLGdCQUFnQixFQUFFLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQztRQUM1QyxjQUFjLGdCQUFBO1FBQ2QsU0FBUyxFQUFFLElBQUEsb0NBQWlCLEVBQUMsU0FBUyxDQUFDO0tBQ3hDLENBQUE7SUFFRCxPQUFPLFNBQVMsQ0FBQTtBQUNsQixDQUFDO0FBcEJELDREQW9CQyJ9