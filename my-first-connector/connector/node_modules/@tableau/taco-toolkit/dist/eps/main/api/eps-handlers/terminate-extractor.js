"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.handleTerminateExractor = void 0;
var http_status_codes_1 = require("http-status-codes");
var eps_logger_1 = require("../../../logging/eps-logger");
var app_global_1 = __importDefault(require("../../core/app-global"));
var handler_utils_1 = require("./handler-utils");
function handleTerminateExractor(_a) {
    var extractorIds = _a.extractorIds, connectionId = _a.connectionId;
    if (!app_global_1.default.connectionManager.hasConnection(connectionId)) {
        var errorMessage = "Client called terminate extractors on connection '".concat(connectionId, "' that does not exist.");
        eps_logger_1.Logger.info(errorMessage);
        throw new handler_utils_1.EpsHandlerError(errorMessage, { httpStatusCode: http_status_codes_1.StatusCodes.NOT_FOUND });
    }
    var freedExtractorIds = app_global_1.default.connectionManager.freeExtractors(connectionId, extractorIds);
    return { freedExtractorIds: freedExtractorIds };
}
exports.handleTerminateExractor = handleTerminateExractor;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGVybWluYXRlLWV4dHJhY3Rvci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NyYy9lcHMvbWFpbi9hcGkvZXBzLWhhbmRsZXJzL3Rlcm1pbmF0ZS1leHRyYWN0b3IudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsdURBQStDO0FBQy9DLDBEQUFvRDtBQUNwRCxxRUFBNkM7QUFDN0MsaURBQWlEO0FBV2pELFNBQWdCLHVCQUF1QixDQUFDLEVBR047UUFGaEMsWUFBWSxrQkFBQSxFQUNaLFlBQVksa0JBQUE7SUFFWixJQUFJLENBQUMsb0JBQVMsQ0FBQyxpQkFBaUIsQ0FBQyxhQUFhLENBQUMsWUFBWSxDQUFDLEVBQUU7UUFDNUQsSUFBTSxZQUFZLEdBQUcsNERBQXFELFlBQVksMkJBQXdCLENBQUE7UUFDOUcsbUJBQU0sQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUE7UUFDekIsTUFBTSxJQUFJLCtCQUFlLENBQUMsWUFBWSxFQUFFLEVBQUUsY0FBYyxFQUFFLCtCQUFXLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQTtLQUNuRjtJQUVELElBQU0saUJBQWlCLEdBQUcsb0JBQVMsQ0FBQyxpQkFBaUIsQ0FBQyxjQUFjLENBQUMsWUFBWSxFQUFFLFlBQVksQ0FBQyxDQUFBO0lBQ2hHLE9BQU8sRUFBRSxpQkFBaUIsbUJBQUEsRUFBRSxDQUFBO0FBQzlCLENBQUM7QUFaRCwwREFZQyJ9